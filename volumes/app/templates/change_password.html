{% extends "base.html" %}

{% block title %}Passwort 채ndern - {{ current_user.username }}{% endblock %}

{% block page_title %}Passwort 채ndern{% endblock %}

{% block content %}

<div style="max-width: 500px; margin: 0 auto;">
    <div style="background: white; border: 1px solid #e1e5e9; padding: 30px; border-radius: 6px;">
        
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div style="margin-bottom: 20px;">
                    {% for category, message in messages %}
                        <div style="padding: 12px; border-radius: 4px; margin-bottom: 10px; font-size: 14px; 
                                    {% if category == 'success' %}background: #dff6dd; border: 1px solid #1a7f37; color: #1a7f37;
                                    {% elif category == 'error' %}background: #ffebe9; border: 1px solid #cf222e; color: #cf222e;
                                    {% else %}background: #dbeafe; border: 1px solid #0969da; color: #0969da;{% endif %}">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <form method="post" action="{{ url_for('change_password') }}">
            <div style="margin-bottom: 20px;">
                <label for="current_password" style="display: block; font-weight: 500; margin-bottom: 8px; color: #333;">
                    Aktuelles Passwort
                </label>
                <input type="password" 
                       id="current_password" 
                       name="current_password" 
                       required 
                       style="width: 100%; padding: 10px 12px; border: 1px solid #d0d7de; font-size: 14px; border-radius: 4px;">
            </div>
            
            <div style="margin-bottom: 20px;">
                <label for="new_password" style="display: block; font-weight: 500; margin-bottom: 8px; color: #333;">
                    Neues Passwort
                </label>
                <input type="password" 
                       id="new_password" 
                       name="new_password" 
                       required 
                       minlength="6"
                       style="width: 100%; padding: 10px 12px; border: 1px solid #d0d7de; font-size: 14px; border-radius: 4px;">
                <p style="font-size: 12px; color: #656d76; margin-top: 5px;">Mindestens 6 Zeichen</p>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label for="new_password_confirm" style="display: block; font-weight: 500; margin-bottom: 8px; color: #333;">
                    Neues Passwort best채tigen
                </label>
                <input type="password" 
                       id="new_password_confirm" 
                       name="new_password_confirm" 
                       required 
                       minlength="6"
                       style="width: 100%; padding: 10px 12px; border: 1px solid #d0d7de; font-size: 14px; border-radius: 4px;">
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 30px;">
                <button type="submit" class="btn btn-primary" style="flex: 1;">
                    Passwort 채ndern
                </button>
                <a href="{{ url_for('index') }}" class="btn" style="flex: 1; text-align: center;">
                    Abbrechen
                </a>
            </div>
        </form>
    </div>
</div>

{% endblock %}
